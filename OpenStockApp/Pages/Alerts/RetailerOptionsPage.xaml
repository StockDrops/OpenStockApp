<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:mct="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:users="clr-namespace:OpenStockApi.Core.Models.Users;assembly=OpenStockApi.Core"
             x:Class="OpenStockApp.Pages.Alerts.RetailerOptionsPage"
             Title="RetailerOptionsPage"
             >
    <ContentPage.Resources>
        <mct:BoolToObjectConverter x:Key="BoolToObjectConverter" TrueObject="Busy... Please wait..." FalseObject="Save Alert Settings" />
        <mct:InvertedBoolConverter x:Key="InvertedBoolConverter" />
        <mct:EnumToIntConverter x:Key="EnumToIntConverter" />
    </ContentPage.Resources>
    <ContentPage.Behaviors>
        <mct:EventToCommandBehavior
            EventName="Appearing"
            Command="{Binding OnNavigatedToCommand}" />
    </ContentPage.Behaviors>
    
    <StackLayout>
        <Label Text="Retailer Options" Style="{StaticResource ListTitleStyle}" Margin="0,10,0,10"/>
        <Picker Title="Select a country"
                        ItemsSource="{Binding Countries}"
                        ItemDisplayBinding="{Binding Name}"
                        SelectedItem="{Binding SelectedCountry}"
                        
                        >
            <Picker.Behaviors>
                <mct:EventToCommandBehavior EventName="SelectedIndexChanged" Command="{Binding LoadRetailers}"/>
            </Picker.Behaviors>

        </Picker>

        <CollectionView ItemsSource="{Binding Retailers}"
                            Margin="0,10,0,10"
                            >
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="users:RetailerOptions">
                    <Grid HeightRequest="90"
                                HorizontalOptions="Start"
                                  
                            WidthRequest="100"
                                Margin="10,0,10,0">
                        <StackLayout>
                            <Label Text="{Binding Retailer.Name}" />

                            <Label Text="Enable" />
                            <Switch IsToggled="{Binding IsEnabled}"/>
                            <!--<Picker SelectedItem="{Binding ModelOptions.NotificationAction}" />-->
                        </StackLayout>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </StackLayout>
</ContentPage>